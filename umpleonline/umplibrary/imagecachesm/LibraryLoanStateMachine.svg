<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: LibraryLoanStateMachine Pages: 1 -->
<svg width="533pt" height="512pt"
 viewBox="0.00 0.00 533.30 512.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 508.4)">
<title>LibraryLoanStateMachine</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-508.4 529.2969,-508.4 529.2969,4 -4,4"/>
<!-- start_Loan_state -->
<g id="node1" class="node">
<title>start_Loan_state</title>
<g id="a_node1"><a xlink:title="Class Loan, SM state, State start">
<ellipse fill="#000000" stroke="#000000" cx="121" cy="-497.2" rx="7.2" ry="7.2"/>
</a>
</g>
</g>
<!-- Loan_state_initial -->
<g id="node2" class="node">
<title>Loan_state_initial</title>
<g id="a_node2"><a xlink:title="Class Loan, SM state, State initial&#13;Entry:&#10; &#160;&#160;setDeadline(getLoanTime());&#10; &#160;&#160;setLoanStartTime(currentTime());">
<path fill="none" stroke="#000000" d="M145,-453C145,-453 97,-453 97,-453 91,-453 85,-447 85,-441 85,-441 85,-429 85,-429 85,-423 91,-417 97,-417 97,-417 145,-417 145,-417 151,-417 157,-423 157,-429 157,-429 157,-441 157,-441 157,-447 151,-453 145,-453"/>
<text text-anchor="middle" x="121" y="-430.8" font-family="Times,serif" font-size="14.00" fill="#000000">initial</text>
</a>
</g>
</g>
<!-- start_Loan_state&#45;&gt;Loan_state_initial -->
<g id="edge1" class="edge">
<title>start_Loan_state&#45;&gt;Loan_state_initial</title>
<g id="a_edge1"><a xlink:title="start to initial">
<path fill="none" stroke="#000000" d="M121,-489.5731C121,-482.9503 121,-472.9322 121,-463.2795"/>
<polygon fill="#000000" stroke="#000000" points="124.5001,-463.1266 121,-453.1266 117.5001,-463.1267 124.5001,-463.1266"/>
</a>
</g>
</g>
<!-- Loan_state_outstanding -->
<g id="node3" class="node">
<title>Loan_state_outstanding</title>
<g id="a_node3"><a xlink:title="Class Loan, SM state, State outstanding">
<path fill="none" stroke="#000000" d="M149.8317,-380C149.8317,-380 92.1683,-380 92.1683,-380 86.1683,-380 80.1683,-374 80.1683,-368 80.1683,-368 80.1683,-356 80.1683,-356 80.1683,-350 86.1683,-344 92.1683,-344 92.1683,-344 149.8317,-344 149.8317,-344 155.8317,-344 161.8317,-350 161.8317,-356 161.8317,-356 161.8317,-368 161.8317,-368 161.8317,-374 155.8317,-380 149.8317,-380"/>
<text text-anchor="middle" x="121" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#000000">outstanding</text>
</a>
</g>
</g>
<!-- Loan_state_initial&#45;&gt;Loan_state_outstanding -->
<g id="edge2" class="edge">
<title>Loan_state_initial&#45;&gt;Loan_state_outstanding</title>
<g id="a_edge2"><a xlink:title="From initial to outstanding automatically">
<path fill="none" stroke="#000000" d="M121,-416.9551C121,-408.8828 121,-399.1764 121,-390.1817"/>
<polygon fill="#000000" stroke="#000000" points="124.5001,-390.0903 121,-380.0904 117.5001,-390.0904 124.5001,-390.0903"/>
</a>
</g>
</g>
<!-- Loan_state_outstanding&#45;&gt;Loan_state_outstanding -->
<g id="edge3" class="edge">
<title>Loan_state_outstanding&#45;&gt;Loan_state_outstanding</title>
<g id="a_edge3"><a xlink:title="From outstanding to outstanding on extend&#13;Transition Action:&#10; &#160;&#160;&#160;&#160;setDeadline(getExtensionTime());">
<path fill="none" stroke="#000000" d="M161.8502,-368.6573C172.0453,-368.1918 179.6655,-365.9727 179.6655,-362 179.6655,-359.5171 176.6889,-357.7192 171.9674,-356.6062"/>
<polygon fill="#000000" stroke="#000000" points="172.2069,-353.109 161.8502,-355.3427 171.3394,-360.0551 172.2069,-353.109"/>
</a>
</g>
<text text-anchor="middle" x="215.7388" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#000000">extend / {...}</text>
</g>
<!-- Loan_state_recalled -->
<g id="node4" class="node">
<title>Loan_state_recalled</title>
<g id="a_node4"><a xlink:title="Class Loan, SM state, State recalled&#13;Entry:&#10; &#160;&#160;setDeadline(getDeadline() &#45; (currentTime() &#45; getLoanStartTime()));">
<path fill="none" stroke="#000000" d="M213,-294C213,-294 165,-294 165,-294 159,-294 153,-288 153,-282 153,-282 153,-270 153,-270 153,-264 159,-258 165,-258 165,-258 213,-258 213,-258 219,-258 225,-264 225,-270 225,-270 225,-282 225,-282 225,-288 219,-294 213,-294"/>
<text text-anchor="middle" x="189" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#000000">recalled</text>
</a>
</g>
</g>
<!-- Loan_state_outstanding&#45;&gt;Loan_state_recalled -->
<g id="edge4" class="edge">
<title>Loan_state_outstanding&#45;&gt;Loan_state_recalled</title>
<g id="a_edge4"><a xlink:title="From outstanding to recalled on recall&#13;Transition Action:&#10; &#160;&#160;&#160;&#160;sendRecallNotice();">
<path fill="none" stroke="#000000" d="M135.4211,-343.7616C144.9775,-331.6756 157.6643,-315.6304 168.2937,-302.1874"/>
<polygon fill="#000000" stroke="#000000" points="171.1428,-304.2271 174.5997,-294.2121 165.6519,-299.8854 171.1428,-304.2271"/>
</a>
</g>
<text text-anchor="middle" x="191.9561" y="-314.8" font-family="Times,serif" font-size="14.00" fill="#000000">recall / {...}</text>
</g>
<!-- Loan_state_overdue -->
<g id="node5" class="node">
<title>Loan_state_overdue</title>
<g id="a_node5"><a xlink:title="Class Loan, SM state, State overdue&#13;Entry:&#10; &#160;&#160;assessFine(); &#10; &#160;&#160;sendOverdueNotice();">
<path fill="none" stroke="#000000" d="M174,-208C174,-208 126,-208 126,-208 120,-208 114,-202 114,-196 114,-196 114,-184 114,-184 114,-178 120,-172 126,-172 126,-172 174,-172 174,-172 180,-172 186,-178 186,-184 186,-184 186,-196 186,-196 186,-202 180,-208 174,-208"/>
<text text-anchor="middle" x="150" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">overdue</text>
</a>
</g>
</g>
<!-- Loan_state_outstanding&#45;&gt;Loan_state_overdue -->
<g id="edge5" class="edge">
<title>Loan_state_outstanding&#45;&gt;Loan_state_overdue</title>
<g id="a_edge5"><a xlink:title="From outstanding to overdue after(deadline)">
<path fill="none" stroke="#000000" d="M98.4881,-343.9574C75.864,-323.5012 46.3675,-288.9649 61.6133,-258 70.8621,-239.2151 88.0708,-224.1659 104.8632,-213.0486"/>
<polygon fill="#000000" stroke="#000000" points="106.9491,-215.8719 113.5623,-207.5944 103.2306,-209.9412 106.9491,-215.8719"/>
</a>
</g>
<text text-anchor="middle" x="102.1934" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#000000">after(deadline)</text>
</g>
<!-- Loan_state_returned -->
<g id="node6" class="node">
<title>Loan_state_returned</title>
<g id="a_node6"><a xlink:title="Class Loan, SM state, State returned">
<path fill="none" stroke="#000000" d="M146,-36C146,-36 98,-36 98,-36 92,-36 86,-30 86,-24 86,-24 86,-12 86,-12 86,-6 92,0 98,0 98,0 146,0 146,0 152,0 158,-6 158,-12 158,-12 158,-24 158,-24 158,-30 152,-36 146,-36"/>
<text text-anchor="middle" x="122" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">returned</text>
</a>
</g>
</g>
<!-- Loan_state_outstanding&#45;&gt;Loan_state_returned -->
<g id="edge8" class="edge">
<title>Loan_state_outstanding&#45;&gt;Loan_state_returned</title>
<g id="a_edge8"><a xlink:title="From outstanding to returned on returnitem">
<path fill="none" stroke="#000000" d="M80.0349,-351.2886C44.9319,-339.3451 0,-316.2048 0,-276 0,-276 0,-276 0,-104 0,-65.2717 41.5783,-42.4521 76.1893,-30.1656"/>
<polygon fill="#000000" stroke="#000000" points="77.3534,-33.4669 85.7263,-26.975 75.1325,-26.8285 77.3534,-33.4669"/>
</a>
</g>
<text text-anchor="middle" x="29.1553" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">returnitem</text>
</g>
<!-- Loan_state_lost -->
<g id="node7" class="node">
<title>Loan_state_lost</title>
<g id="a_node7"><a xlink:title="Class Loan, SM state, State lost&#13;Entry:&#10; &#160;&#160;assessReplacementCost();">
<path fill="none" stroke="#000000" d="M352,-122C352,-122 304,-122 304,-122 298,-122 292,-116 292,-110 292,-110 292,-98 292,-98 292,-92 298,-86 304,-86 304,-86 352,-86 352,-86 358,-86 364,-92 364,-98 364,-98 364,-110 364,-110 364,-116 358,-122 352,-122"/>
<text text-anchor="middle" x="328" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#000000">lost</text>
</a>
</g>
</g>
<!-- Loan_state_outstanding&#45;&gt;Loan_state_lost -->
<g id="edge12" class="edge">
<title>Loan_state_outstanding&#45;&gt;Loan_state_lost</title>
<g id="a_edge12"><a xlink:title="From outstanding to lost on declareLost">
<path fill="none" stroke="#000000" d="M161.8392,-358.4986C239.1437,-349.3926 405.2574,-317.4089 474,-208 502.4639,-162.6976 426.8518,-131.3384 374.1137,-115.6261"/>
<polygon fill="#000000" stroke="#000000" points="374.8139,-112.1857 364.236,-112.7837 372.878,-118.9127 374.8139,-112.1857"/>
</a>
</g>
<text text-anchor="middle" x="492.6484" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#000000">declareLost</text>
</g>
<!-- Loan_state_recalled&#45;&gt;Loan_state_overdue -->
<g id="edge6" class="edge">
<title>Loan_state_recalled&#45;&gt;Loan_state_overdue</title>
<g id="a_edge6"><a xlink:title="From recalled to overdue after(deadline)">
<path fill="none" stroke="#000000" d="M180.7291,-257.7616C175.4033,-246.0176 168.3824,-230.5355 162.396,-217.3349"/>
<polygon fill="#000000" stroke="#000000" points="165.5766,-215.8739 158.259,-208.2121 159.2015,-218.7649 165.5766,-215.8739"/>
</a>
</g>
<text text-anchor="middle" x="212.1934" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#000000">after(deadline)</text>
</g>
<!-- Loan_state_recalled&#45;&gt;Loan_state_returned -->
<g id="edge9" class="edge">
<title>Loan_state_recalled&#45;&gt;Loan_state_returned</title>
<g id="a_edge9"><a xlink:title="From recalled to returned on returnitem">
<path fill="none" stroke="#000000" d="M159.795,-257.8425C142.0132,-245.5733 119.9235,-228.0005 105,-208 89.4706,-187.1875 87.744,-179.471 82.6895,-154 75.072,-115.6143 92.138,-72.3662 106.129,-45.154"/>
<polygon fill="#000000" stroke="#000000" points="109.2713,-46.7001 110.9041,-36.2318 103.0996,-43.397 109.2713,-46.7001"/>
</a>
</g>
<text text-anchor="middle" x="111.1553" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000">returnitem</text>
</g>
<!-- Loan_state_recalled&#45;&gt;Loan_state_lost -->
<g id="edge13" class="edge">
<title>Loan_state_recalled&#45;&gt;Loan_state_lost</title>
<g id="a_edge13"><a xlink:title="From recalled to lost on declareLost">
<path fill="none" stroke="#000000" d="M225.0125,-269.5693C279.3886,-259.044 378.3189,-236.4351 399,-208 418.5195,-181.162 389.9272,-149.5854 363.4164,-128.3259"/>
<polygon fill="#000000" stroke="#000000" points="365.3677,-125.4109 355.3114,-122.0761 361.0932,-130.9542 365.3677,-125.4109"/>
</a>
</g>
<text text-anchor="middle" x="437.6484" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">declareLost</text>
</g>
<!-- Loan_state_overdue&#45;&gt;Loan_state_overdue -->
<g id="edge7" class="edge">
<title>Loan_state_overdue&#45;&gt;Loan_state_overdue</title>
<g id="a_edge7"><a xlink:title="From overdue to overdue after(getFineIncrementInterval())">
<path fill="none" stroke="#000000" d="M186.0873,-197.8361C196.2211,-197.4929 204,-194.8809 204,-190 204,-186.9495 200.9614,-184.7852 196.2083,-183.5072"/>
<polygon fill="#000000" stroke="#000000" points="196.4609,-180.0101 186.0873,-182.1639 195.5399,-186.9492 196.4609,-180.0101"/>
</a>
</g>
<text text-anchor="middle" x="297.2798" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">after(getFineIncrementInterval())</text>
</g>
<!-- Loan_state_overdue&#45;&gt;Loan_state_returned -->
<g id="edge10" class="edge">
<title>Loan_state_overdue&#45;&gt;Loan_state_returned</title>
<g id="a_edge10"><a xlink:title="From overdue to returned on returnitem">
<path fill="none" stroke="#000000" d="M148.5711,-171.9024C147.7235,-162.3839 146.5168,-150.5345 145,-140 140.3441,-107.6645 133.1389,-70.8519 128.0352,-46.1989"/>
<polygon fill="#000000" stroke="#000000" points="131.3973,-45.1777 125.9225,-36.1071 124.5458,-46.6121 131.3973,-45.1777"/>
</a>
</g>
<text text-anchor="middle" x="171.1553" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#000000">returnitem</text>
</g>
<!-- Loan_state_overdue&#45;&gt;Loan_state_lost -->
<g id="edge14" class="edge">
<title>Loan_state_overdue&#45;&gt;Loan_state_lost</title>
<g id="a_edge14"><a xlink:title="From overdue to lost on declareLost">
<path fill="none" stroke="#000000" d="M186.021,-172.5966C213.7956,-159.1774 252.3936,-140.529 282.3351,-126.0628"/>
<polygon fill="#000000" stroke="#000000" points="284.246,-129.0267 291.7276,-121.5249 281.2008,-122.7238 284.246,-129.0267"/>
</a>
</g>
<text text-anchor="middle" x="281.6484" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000">declareLost</text>
</g>
<!-- Loan_state_lost&#45;&gt;Loan_state_returned -->
<g id="edge11" class="edge">
<title>Loan_state_lost&#45;&gt;Loan_state_returned</title>
<g id="a_edge11"><a xlink:title="From lost to returned on returnitem&#13;Transition Action:&#10; &#160;&#160;&#160;&#160;refundReplacementCost();">
<path fill="none" stroke="#000000" d="M291.6455,-88.8229C257.1858,-74.4368 205.2848,-52.7694 167.9686,-37.1908"/>
<polygon fill="#000000" stroke="#000000" points="168.9134,-33.7925 158.3369,-33.1698 166.2166,-40.2522 168.9134,-33.7925"/>
</a>
</g>
<text text-anchor="middle" x="283.5698" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000">returnitem / {...}</text>
</g>
</g>
</svg>
