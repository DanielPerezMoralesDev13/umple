/*

Copyright: All contributers to the Umple Project

This file is made available subject to the open source license found at:
http://umple.org/license

Definitions of the different code- or model-transformation generators
Note that some generators such as Umlet and Violet are in their own files

 */

namespace cruise.umple.compiler;

//use FeatureDiagramGenerator; // This feature should be moved into config. file in next step.

// Allows independent code generation tools
// Different generators will do different things regarding where the files are put, etc.
interface CodeGenerator
{
  boolean setModel(UmpleModel aUmpleModel);
  boolean setOutput(String aString);
  boolean setSuboption(String subopt);
  boolean hasSuboption(String subopt);
  void generate();
  void prepare();
  void postpare();
}

// Default implementation for generators with suboptions
class CodeGeneratorWithSubptions
{
  isA CodeGenerator;
  lazy String[] suboptions;
  public boolean hasSuboption(String subopt)
  {
    return suboptions.contains(subopt);
  }

  public boolean setSuboption(String subopt)
  {
    return suboptions.add(subopt);
  }
}

interface CodeTranslator
{
  String translate(String id, Attribute attribute);
  String translate(String id, StateMachine stm);
  String translate(String id, State st);
  String translate(String id, Event e);
  String translate(String id, Activity a);
  String translate(String id, AssociationVariable aVar);
  String translate(String id, ConstraintTree constraint);
  String translate(String id, ConstraintVariable cv);
  String translate(String id, TraceItem traceItem);
  // TODO: LH#171
  //String translate(String id, AssociationVariable associationVariable);
}

class SuperCodeGenerator {
  depend java.util.*;
  depend cruise.umple.util.*;
  abstract;
  //The reason for bringing following inheritance here is because of Umple code generation. It generates a false method for iterface coverage.
  isA CodeGeneratorWithSubptions;
  isA CodeTranslator;
  UmpleModel model = null;
  String output = "";

  public void postpare() { GeneratorHelper.postpare(getModel()); }
}
class GeneratorHelper
{
  depend cruise.umple.parser.Position;
}

use Umple.ump;
use StateMachine.ump;
use GeneratorHelper_Code.ump;
use generators/Generator_Code.ump;
use generators/Generator_CodeUmple.ump;
use generators/Generator_CodeRuby.ump;
use generators/Generator_CodeJava.ump;
use generators/Generator_CodeRTCpp.ump;
use generators/Generator_CodePhp.ump;
use generators/Generator_CodeUigu2.ump;
use generators/Generator_CodeSql.ump;
use generators/Generator_CodeUmpleSelf.ump;
use generators/Generator_CodeUSE.ump;
use generators/ecoreGenerator/ecoreGeneratorConfig.ump;
use generators/Generator_CodeTest.ump;
use PapyrusGenerator; // This use statement should moved into main conf. file in later stages.
mixset PapyrusGenerator{
  use generators/papyrus/Generator_CodePapyrus.ump;
}
use XmiGenerator;
mixset XmiGenerator{
  use generators/xmi/Generator_CodeXmi.ump;
}
use TextUmlGenerator;
mixset TextUmlGenerator{ use generators/Generator_CodeTextUml.ump; }
use ScxmlGenerator;
mixset ScxmlGenerator{ use generators/Generator_CodeScxml.ump; }

use generators/statemachineDiagramGenerator/stateMachineDiagramConfig.ump;
use StateTableGenerator;
mixset StateTableGenerator{ use generators/Generator_CodeStateTables.ump; }
use EventSequenceGenerator;
mixset EventSequenceGenerator{ use generators/Generator_CodeEventSequence.ump; }
use SimpleMetricsGenerator;
mixset SimpleMetricsGenerator{ use generators/Generator_CodeSimpleMetrics.ump; }
use Group_A_Generator;
mixset Group_A_Generator{
use generators/Generator_CodeGvClassDiagram.ump;
use generators/Generator_CodeGvClassTraitDiagram.ump;
use generators/featureDiagramGenerator/FeatureDiagramConfig.ump;
use generators/entityRelationshipDiagramGenerator/entityRelationshipConfig.ump
}
use generators/Generator_CodeAlloy.ump;
use generators/Generator_CodeNuSMV.ump;
use generators/Generator_CodeNuSMVOptimizer.ump;
use SimulateGenerator;
mixset SimulateGenerator{ use generators/Generator_CodeSimulate.ump; }
use YumlGenerator;
mixset YumlGenerator{ use generators/Generator_CodeYuml.ump; }
use XtextGenerator;
mixset XtextGenerator{ use generators/Generator_CodeXtext.ump; }
use JsonGenerator;
mixset JsonGenerator{ use generators/Generator_CodeJson.ump; }
use JsonMixedGenerator;
mixset JsonMixedGenerator{ use generators/Generator_CodeJsonMixed.ump; }
use StructureDiagramGenerator;
mixset StructureDiagramGenerator{ use generators/Generator_CodeStructureDiagram.ump; }

use BeforeSuperCodeGenerator;
mixset BeforeSuperCodeGenerator{
use Generator_SuperCodeGenerator.ump;
use Generator_SuperGvGenerator.ump; // ABSTRACT CLASS FOR GV!!
use Generator_Html.ump;
use Generator_UmpleModelWalker.ump;
use generators/Generator_CodeAnalysis.ump;
}
